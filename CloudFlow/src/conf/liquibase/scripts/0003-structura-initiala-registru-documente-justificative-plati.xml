<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0003-creare-tabele" author="CloudSoft.User1">
		<sql endDelimiter=";">
			CREATE TABLE REGISTRU_DOCUMENTE_JUST_PLATI (
				ID BIGINT NOT NULL,
				NUMAR_INREGISTRARE TEXT NOT NULL,
				DATA_INREGISTRARE TIMESTAMP NOT NULL,
				EMITENT TEXT NOT NULL,
				TIP_DOCUMENT_ID BIGINT NOT NULL,
				NUMAR_DOCUMENT TEXT NOT NULL,
				DATA_DOCUMENT TIMESTAMP NOT NULL,
				MOD_LIVRARE TEXT NOT NULL,
				DETALII TEXT NOT NULL,
				VALOARE NUMERIC(20, 2) NOT NULL,
				MONEDA_ID BIGINT NOT NULL,
				DATA_SCADENTA TIMESTAMP NOT NULL,
				MODALITATE_PLATA TEXT NOT NULL,
				RECONCILIERE_CU_EXTRAS_BANCA BOOLEAN,
				PLATIT BOOLEAN,
				DATA_PLATII TIMESTAMP,
				INCADRARE_CONFORM_BVC TEXT,
				INTRARE_EMITERE NUMERIC,
				PLATA_SCADENTA NUMERIC,
				SCADENTA_EMITERE NUMERIC,
				ANULAT BOOLEAN,
				MOTIV_ANULARE TEXT,
				
				CONSTRAINT REG_DOC_JUST_PLATI_PK PRIMARY KEY (ID)
			);
		</sql>
	</changeSet>
	
	<changeSet id="0003-adaugare-constrangeri" author="CloudSoft.User1">
		<sql endDelimiter=";">
			ALTER TABLE REGISTRU_DOCUMENTE_JUST_PLATI ADD CONSTRAINT REG_DOC_JUST_PLATI_NR_INREG_UQ UNIQUE (NUMAR_INREGISTRARE);
			ALTER TABLE REGISTRU_DOCUMENTE_JUST_PLATI ADD CONSTRAINT REG_DOC_JST_PLTI_TIP_DOC_ID_FK FOREIGN KEY (TIP_DOCUMENT_ID) REFERENCES NOMENCLATOR_VALUES (ID);
			ALTER TABLE REGISTRU_DOCUMENTE_JUST_PLATI ADD CONSTRAINT REG_DOC_JUST_PLTI_MONEDA_ID_FK FOREIGN KEY (MONEDA_ID) REFERENCES NOMENCLATOR_VALUES (ID);			
		</sql>
	</changeSet>
	
</databaseChangeLog>