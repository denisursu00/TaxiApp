<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0016-adaugare_atribute_nomenclator_registru_iesiri_tip_document" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE, UI_ORDER, REQUIRED) 
    			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where name='Registru iesiri - Tip document'),	'Cod echivalent cerere intrare', 'attribute3', 'ATTRIBUTE3', 'TEXT', 3, true);
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE, UI_ORDER, REQUIRED) 
    			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where name='Registru iesiri - Tip document'),	'Asteapta raspuns', 'attribute4', 'ATTRIBUTE4', 'BOOLEAN', 4, true);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0016-updatare_valori_nomenclator_registru_iesiri_tip_document" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'DA';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'true'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'CB';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'true'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'SR';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'SN';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false', ATTRIBUTE3 = 'ER'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'RE';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false', ATTRIBUTE3 = 'IP'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'RI';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'HR';    			
    		UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru iesiri - Tip document') AND ATTRIBUTE1 = 'AL';
		]]>
		</sql>
	</changeSet>	
	
	<changeSet id="0016-adaugare_atribute_nomenclator_registru_intrari_tip_document" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE, UI_ORDER, REQUIRED) 
    			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where name='Registru intrari - Tip document'),	'Cod echivalent cerere iesire', 'attribute3', 'ATTRIBUTE3', 'TEXT', 3, false);
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE, UI_ORDER, REQUIRED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where name='Registru intrari - Tip document'),	'Asteapta raspuns', 'attribute4', 'ATTRIBUTE4', 'BOOLEAN', 4, true);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0016-updatare_valori_nomenclator_registru_intrari_tip_document" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'DA';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false', ATTRIBUTE3 = 'CB'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'RC';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false', ATTRIBUTE3 = 'SR'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'CR';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'true'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'ER';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'true'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'IP';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'SC';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'PC';
			UPDATE NOMENCLATOR_VALUES
				SET ATTRIBUTE4 = 'false'
					where NOMENCLATOR_ID = (select ID from nomenclator where name='Registru intrari - Tip document') AND ATTRIBUTE1 = 'AT';
			
    	]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>