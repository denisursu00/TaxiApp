<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0040-creare-tabele-notificare_expirare_mandat_reprezentanti_comisie_gl" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			CREATE TABLE NOTIFICARE_EXPIRARE_MANDAT_REPRZENTANTI_COMISIE_GL (
				id BIGINT NOT NULL,
				reprezentant_comisie_gl_id BIGINT NOT NULL,
				persoana_id BIGINT NOT NULL,
				CONSTRAINT notif_exp_mandat_reprez_comisie_gl_pk PRIMARY KEY (id),
				CONSTRAINT notif_exp_mandat_reprez_comisie_gl_uq UNIQUE (reprezentant_comisie_gl_id, persoana_id),
				CONSTRAINT notif_exp_mandat_reprez_comisie_gl_reprez_comisie_gl_fk FOREIGN KEY (reprezentant_comisie_gl_id) REFERENCES reprezentanti_comisie_gl (id),
				CONSTRAINT notif_exp_mandat_reprez_comisie_gl_persoana_fk FOREIGN KEY (persoana_id) REFERENCES nomenclator_values (id)
			);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0040-creare-tabel-notificare_nr_organimse_bugetate" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			CREATE TABLE NOTIFICARE_NR_ORGANISME_BUGETATE (
				id BIGINT NOT NULL,
				an INTEGER NOT NULL,
				CONSTRAINT notificare_nr_organisme_bugetate_pk PRIMARY KEY (id)
			);
		]]>
		</sql>
	</changeSet>
		
	<changeSet id="0040-adaugare-coloana-notificat-in-calendare_event" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE calendar_event
			ADD COLUMN notificat BOOLEAN NOT NULL DEFAULT false;
		]]>
		</sql>
	</changeSet>

	<changeSet id="0040-adaugare-parametrii-notificari" author="CloudSoft.User3">
		<sql endDelimiter=";"><![CDATA[
		INSERT INTO parameters (id, name, description, value, type) 
			VALUES (nextval('HIBERNATE_SEQUENCE'), 'notificari.email.nr_organisme_bugetate.data_inceput', 
					'Reprezinta data inceput notificare prin mail - completare numar organisme bugetate', '2019.03.15', 'DATE'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.nr_organisme_bugetate.subiect', 
					'Reprezinta subiect mail notificare numar organisme bugetate', 'Notificare numar organisme bugetate', 'STRING'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.nr_organisme_bugetate.continut', 
					'Reprezinta continut mail notificare numar organisme bugetate', 'Va reamintim sa completati in aplicatie numarul de organisme bugetate.', 'STRING'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.sedinta_aga.subiect', 
					'Reprezinta subiect mail notificare sedinta AGA', 'Sedinta AGA ${data}', 'STRING'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.sedinta_aga.continut', 
					'Reprezinta continut mail notificare sedinta AGA', 'Va rugam sa pregatiti documentele necesare pentru sedinta AGA din data ${data}.', 'STRING'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.expirare_mandat_reprezentanti_comisie_gl.subiect', 
					'Reprezinta subiect mail notificare expirare mandata reprezentanti comise GL', 'Expirare mandat presedinte, vicepresedinte din ${nume_comisie}.', 'STRING'),
				(nextval('HIBERNATE_SEQUENCE'), 'notificari.email.expirare_mandat_reprezentanti_comisie_gl.continut', 
					'Reprezinta continut mail notificare expirare mandata reprezentanti comise GL', 'Va aducem la cunostinta ca mandatul urmatoarelor persoane se apropie de expirare: ${persoane}', 'STRING');
		]]>
		</sql>
	</changeSet>




	
</databaseChangeLog>