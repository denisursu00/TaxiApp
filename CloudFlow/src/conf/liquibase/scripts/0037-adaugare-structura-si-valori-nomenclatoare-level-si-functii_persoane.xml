<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
	<changeSet id="0037-structura-si-valori-nomenclator-level_functii_persoane" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			INSERT INTO NOMENCLATOR (ID, NAME, CODE) VALUES (nextval('HIBERNATE_SEQUENCE'), 'Level functii persoane', 'level_functii_persoane');

			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Denumire', 'attribute1', 'ATTRIBUTE1', 'TEXT', NULL, 1, TRUE);
			
			INSERT INTO NOMENCLATOR_UI_ATTRIBUTE (
				ID, 
				NOMENCLATOR_ID, 
				ATTRIBUTE_ID, 
				UI_ORDER
			) VALUES (
				nextval('HIBERNATE_SEQUENCE'), 
				(select ID from NOMENCLATOR where code='level_functii_persoane'),
				(select ID from NOMENCLATOR_ATTRIBUTE where NOMENCLATOR_ID=(select ID from NOMENCLATOR where code='level_functii_persoane') and KEY='attribute1'),
				1
			);
			
			INSERT INTO NOMENCLATOR_VALUES (ID, NOMENCLATOR_ID, ATTRIBUTE1, DELETED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Level 0', FALSE);
			INSERT INTO NOMENCLATOR_VALUES (ID, NOMENCLATOR_ID, ATTRIBUTE1, DELETED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Level 1', FALSE);
			INSERT INTO NOMENCLATOR_VALUES (ID, NOMENCLATOR_ID, ATTRIBUTE1, DELETED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Level 2', FALSE);
			INSERT INTO NOMENCLATOR_VALUES (ID, NOMENCLATOR_ID, ATTRIBUTE1, DELETED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Level 3', FALSE);
			INSERT INTO NOMENCLATOR_VALUES (ID, NOMENCLATOR_ID, ATTRIBUTE1, DELETED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane'), 'Level 3 +', FALSE);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0037-structura-nomenclator-functii_persoane" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			INSERT INTO NOMENCLATOR (ID, NAME, CODE) VALUES (nextval('HIBERNATE_SEQUENCE'), 'Functii persoane', 'functii_persoane');

			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='functii_persoane'),	'Denumire', 'attribute1', 'ATTRIBUTE1', 'TEXT', NULL, 1, TRUE);				
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
				VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='functii_persoane'),	'Level', 'attribute2', 'ATTRIBUTE2', 'NOMENCLATOR', (select ID from nomenclator where code='level_functii_persoane'), 2, TRUE); 
				
			INSERT INTO NOMENCLATOR_UI_ATTRIBUTE (
				ID, 
				NOMENCLATOR_ID, 
				ATTRIBUTE_ID, 
				UI_ORDER
			) VALUES (
				nextval('HIBERNATE_SEQUENCE'), 
				(select ID from NOMENCLATOR where code='functii_persoane'),
				(select ID from NOMENCLATOR_ATTRIBUTE where NOMENCLATOR_ID=(select ID from NOMENCLATOR where code='functii_persoane') and KEY='attribute1'),
				1
			);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0037-structura-nomenclator-level_functii_persoane_per_institutii" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			INSERT INTO NOMENCLATOR (ID, NAME, CODE) VALUES (nextval('HIBERNATE_SEQUENCE'), 'Level functii persoane per institutii', 'level_functii_persoane_per_institutii');
			
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane_per_institutii'), 'Functie', 'attribute1', 'ATTRIBUTE1', 'NOMENCLATOR', (select ID from nomenclator where code='functii_persoane'), 1, TRUE);  
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane_per_institutii'), 'Level', 'attribute2', 'ATTRIBUTE2', 'NOMENCLATOR', (select ID from nomenclator where code='level_functii_persoane'), 2, TRUE);
			INSERT INTO NOMENCLATOR_ATTRIBUTE (ID, NOMENCLATOR_ID, NAME, KEY, COLUMN_NAME, TYPE,TYPE_NOMENCLATOR_ID, UI_ORDER, REQUIRED) 
			VALUES (nextval('HIBERNATE_SEQUENCE'), (select ID from nomenclator where code='level_functii_persoane_per_institutii'), 'Institutie', 'attribute3', 'ATTRIBUTE3', 'NOMENCLATOR', (select ID from nomenclator where code='institutii'), 3, TRUE);  
			
			INSERT INTO NOMENCLATOR_UI_ATTRIBUTE (
				ID, 
				NOMENCLATOR_ID, 
				ATTRIBUTE_ID, 
				UI_ORDER
			) VALUES (
				nextval('HIBERNATE_SEQUENCE'), 
				(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii'),
				(select ID from NOMENCLATOR_ATTRIBUTE where NOMENCLATOR_ID=(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii') and KEY='attribute1'),
				1
			);
			INSERT INTO NOMENCLATOR_UI_ATTRIBUTE (
				ID, 
				NOMENCLATOR_ID, 
				ATTRIBUTE_ID, 
				UI_ORDER
			) VALUES (
				nextval('HIBERNATE_SEQUENCE'), 
				(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii'),
				(select ID from NOMENCLATOR_ATTRIBUTE where NOMENCLATOR_ID=(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii') and KEY='attribute2'),
				2
			);
			INSERT INTO NOMENCLATOR_UI_ATTRIBUTE (
				ID, 
				NOMENCLATOR_ID, 
				ATTRIBUTE_ID, 
				UI_ORDER
			) VALUES (
				nextval('HIBERNATE_SEQUENCE'), 
				(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii'),
				(select ID from NOMENCLATOR_ATTRIBUTE where NOMENCLATOR_ID=(select ID from NOMENCLATOR where code='level_functii_persoane_per_institutii') and KEY='attribute3'),
				3
			);
		]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>