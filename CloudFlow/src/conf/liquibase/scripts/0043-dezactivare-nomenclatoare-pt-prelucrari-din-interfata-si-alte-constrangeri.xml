<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0043-adaugare-coloana-hidden-in-tabel-nomenclator" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator ADD hidden BOOLEAN default FALSE;
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-adaugare-coloana-allow_processing_values_from_ui-in-tabel-nomenclator" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator ADD allow_processing_values_from_ui BOOLEAN default TRUE;
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-adaugare-coloana-allow_processing_structure_from_ui-in-tabel-nomenclator" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator ADD allow_processing_structure_from_ui BOOLEAN default TRUE;
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-setare-nomenclatoare-ca-hidden" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator 
			SET hidden=TRUE
			WHERE code in ('alte_deconturi_generare_numar_decont', 'deplasari_deconturi_generare_numar_inregistrare', 'registru_facturi_generare_numar_inregistrare', 'registru_intrari_iesiri_generare_numar_inregistrare');
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-dezactivare-nomenclatoare-pt-prelucrare-valori-din-interfata" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator 
			SET allow_processing_values_from_ui=FALSE
			WHERE code in ('alte_deconturi_generare_numar_decont', 'categorii_comisii_sau_gl', 'comisii_sau_gl', 'deplasari_deconturi_generare_numar_inregistrare', 'registru_facturi_tip_document', 'registru_facturi_generare_numar_inregistrare', 'registru_iesiri_tip_document', 'registru_intrari_tip_document', 'registru_intrari_iesiri_generare_numar_inregistrare', 'scheme_sepa_eur', 'scheme_sepa_ron', 'tip_institutii', 'tip_organism');
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-dezactivare-nomenclatoare-pt-prelucrare-structura-din-interfata" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator 
			SET allow_processing_structure_from_ui=FALSE
			WHERE code in ('alte_deconturi_generare_numar_decont', 'categorii_comisii_sau_gl', 'comisii_sau_gl', 'deplasari_deconturi_generare_numar_inregistrare', 'registru_facturi_tip_document', 'registru_facturi_generare_numar_inregistrare', 'registru_iesiri_tip_document', 'registru_intrari_tip_document', 'registru_intrari_iesiri_generare_numar_inregistrare', 'scheme_sepa_eur', 'scheme_sepa_ron', 'tip_institutii', 'tip_organism');
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-adaugare-constrangere-unique-nomenclator_id-and-key-in-tabel-nomenclator_attribute" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE NOMENCLATOR_ATTRIBUTE ADD CONSTRAINT NOMENCLATOR_ATTRIBUTE_NOM_ID_AND_KEY_UQ UNIQUE ( NOMENCLATOR_ID, KEY );
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0043-adaugare-constrangere-unique-nomenclator_id-and-column_name-in-tabel-nomenclator_attribute" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE NOMENCLATOR_ATTRIBUTE ADD CONSTRAINT NOMENCLATOR_ATTRIBUTE_NOM_ID_AND_COL_NAME_UQ UNIQUE ( NOMENCLATOR_ID, COLUMN_NAME );
		]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>