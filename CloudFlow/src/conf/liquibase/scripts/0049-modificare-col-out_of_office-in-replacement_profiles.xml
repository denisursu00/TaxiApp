<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0049-modificare-col-out_of_office-in-replacement_profiles" author="CloudSoft.User4">
		<sql endDelimiter=";"><![CDATA[	
			ALTER TABLE replacement_profiles 
				RENAME COLUMN out_of_office TO out_of_office_copy;
				
			ALTER TABLE replacement_profiles 
				ADD COLUMN out_of_office BOOLEAN;
				
			UPDATE replacement_profiles
				SET out_of_office = CASE
					WHEN out_of_office_copy = 0 THEN false
					ELSE true
					END;
					
			ALTER TABLE replacement_profiles 
				DROP COLUMN out_of_office_copy;		
		]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>