<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        	http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="0039-completare-automata-numar_zile_concediu_odihna_neefectuate_an_in_curs-si-readonly-in-concedii_personal_arb" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='concedii_personal_arb') and key='attribute3'), 
				autocomplete_type='COPY_VALUE', 
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='concedii_personal_arb') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-numar_deplasari_bugetate_ramase-si-readonly-in-detalii_numar_deplasari_bugetate_organisme" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='detalii_numar_deplasari_bugetate_organisme') and key='attribute4'), 
				autocomplete_type='COPY_VALUE', 
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='detalii_numar_deplasari_bugetate_organisme') 
				and key='attribute9';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-adresa-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute6',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute4';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-localitate-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute7',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute5';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-cod_bic-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute4',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-adresa-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute6',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute4';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-localitate-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute7',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute5';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-cod_bic-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') and key='attribute3'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute4',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-abreviere-si-readonly-in-reprezentanti_arb_organisme_interne_si_internationale" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') and key='attribute1'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute3',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') 
				and key='attribute2';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-completare-automata-functie-si-readonly-in-reprezentanti_arb_organisme_interne_si_internationale" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete=(select name from nomenclator_attribute where nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') and key='attribute5'), 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute8',
				readonly_on_add=TRUE, 
				readonly_on_edit=TRUE
			WHERE nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<!-- Uugrade schimbare din attribute name in key -->
	
	<changeSet id="0039-upgrade-to-key-completare-automata-numar_zile_concediu_odihna_neefectuate_an_in_curs-si-readonly-in-concedii_personal_arb" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='concedii_personal_arb') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-numar_deplasari_bugetate_ramase-si-readonly-in-detalii_numar_deplasari_bugetate_organisme" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute4'
			WHERE nomenclator_id=(select id from nomenclator where code='detalii_numar_deplasari_bugetate_organisme') 
				and key='attribute9';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-adresa-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute4';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-localitate-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute5';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-cod_bic-si-readonly-in-registru_sepa_eur" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_eur') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-adresa-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute4';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-localitate-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute5';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-cod_bic-si-readonly-in-registru_sepa_ron" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute3'
			WHERE nomenclator_id=(select id from nomenclator where code='registru_sepa_ron') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-abreviere-si-readonly-in-reprezentanti_arb_organisme_interne_si_internationale" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute1'
			WHERE nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') 
				and key='attribute2';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-completare-automata-functie-si-readonly-in-reprezentanti_arb_organisme_interne_si_internationale" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_name_for_autocomplete='attribute5'
			WHERE nomenclator_id=(select id from nomenclator where code='reprezentanti_arb_organisme_interne_si_internationale') 
				and key='attribute6';
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-redenumire-coloana-attribute_name_for_filter_value-din-tabel-nomenclator_attribute_selection_filter" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator_attribute_selection_filter
				RENAME COLUMN attribute_name_for_filter_value TO attribute_key_for_autocomplete_filter_value;
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-redenumire-coloana-type_nomenclator_selection_filters_custom_class_attribute_names-din-tabel-nomenclator_attribute" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator_attribute
				RENAME COLUMN type_nomenclator_selection_filters_custom_class_attribute_names TO type_nomenclator_selection_filters_custom_class_attribute_keys;
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="0039-upgrade-to-key-redenumire-coloana-attribute_name_for_autocomplete-din-tabel-nomenclator_attribute" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			ALTER TABLE nomenclator_attribute
				RENAME COLUMN attribute_name_for_autocomplete TO attribute_key_for_autocomplete;
		]]>
		</sql>
	</changeSet>
		
	<!-- Upgrade schimbare din attribute name in key -->
	
	<changeSet id="0039-completare-automata-functie_reprezentant_membru_afiliat-in-institutii" author="CloudSoft.User1">
		<sql endDelimiter=";"><![CDATA[
			UPDATE nomenclator_attribute 
			SET attribute_key_for_autocomplete='attribute22', 
				autocomplete_type='NOMENCLATOR_ATTRIBUTE', 
				nomenclator_attribute_key_for_autocomplete='attribute8'
			WHERE nomenclator_id=(select id from nomenclator where code='institutii') 
				and key='attribute23';
		]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>