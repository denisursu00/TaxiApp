<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
			http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
		
	<changeSet id="0013-adaugare-tabel-deplasari-deconturi" author="CloudSoft.User2">
		<sql>
			CREATE TABLE DEPLASARI_DECONTURI (
			
				ID BIGINT NOT NULL,
				NUMAR_INREGISTRARE TEXT NOT NULL,
				APELATIV TEXT NOT NULL,
				REPREZENTANT_ARB_ID BIGINT NOT NULL,
				NUMAR_DECIZIE TEXT NOT NULL,
				DOCUMENT_LOCATION_REAL_NAME TEXT NOT NULL,
				DOCUMENT_ID TEXT NOT NULL,
				DENUMIRE_INSTITUTIE TEXT NOT NULL,
				DATA_DECIZIE TIMESTAMP NOT NULL,
				ORGANISM_ID BIGINT NOT NULL,
				DENUMIRE_COMITET TEXT NOT NULL,
				NUMAR_DEPLASARI_EFECTUATE BIGINT NOT NULL,
				NUMAR_DEPLASARI_BUG_RAMASE BIGINT NOT NULL,
				EVENIMENT TEXT NOT NULL,
				TARA TEXT NOT NULL,
				ORAS TEXT NOT NULL,
				DATA_PLECARE TIMESTAMP NOT NULL,
				DATA_SOSIRE TIMESTAMP NOT NULL,
				DATA_CONFERINTA TIMESTAMP NOT NULL,
				NUMAR_NOPTI BIGINT NOT NULL,
				MINUTA_INTALNIRE_TRANSMISA BOOLEAN,
				OBSERVATII TEXT,
				DETALII_NUMAR_DEPLASARI_BUGETATE_NOMENCLATOR_VALUE_ID BIGINT NOT NULL,
				
				CHELTUIELI_ARB_TITULAR_DECONT TEXT,
				CHELTUIELI_ARB_TIP_DECONT TEXT,
				CHELTUIELI_ARB_DATA_DECONT TIMESTAMP,
				
				CHEL_REP_ARB_DIURNA_ZILNICA NUMERIC(8,4),
				CHEL_REP_ARB_D_Z_VALUTA TEXT,
				CHEL_REP_ARB_D_Z_CURS_VALUTAR NUMERIC(8,4),
				CHEL_REP_ARB_NUMAR_ZILE BIGINT,
				CHEL_REP_ARB_TOTAL_DIURNA BIGINT,
				CHEL_REP_ARB_AVANS_PR_SUMA NUMERIC(8,4),
				CHEL_REP_ARB_AVANS_P_S_VALUTA TEXT,
				CHEL_REP_ARB_A_P_S_CURS_VALUT NUMERIC(8,4),
				CHEL_REP_ARB_A_P_CARD_SAU_NUM BIGINT,
				
				ANULAT BOOLEAN,
				MOTIV_ANULARE TEXT,
				FINALIZAT BOOLEAN,
				
				CONSTRAINT pk_deplasari_deconturi PRIMARY KEY (ID),
				CONSTRAINT fk_reprezentant FOREIGN KEY (REPREZENTANT_ARB_ID) REFERENCES NOMENCLATOR_VALUES (ID),
				CONSTRAINT fk_organism FOREIGN KEY (ORGANISM_ID) REFERENCES NOMENCLATOR_VALUES (ID),
				CONSTRAINT uq_numar_inreg_depl_deconturi UNIQUE (NUMAR_INREGISTRARE)
			);
		</sql>
	</changeSet>
		
	<changeSet id="0013-adaugare-tabel-cheltuieli-arb" author="CloudSoft.User2">
		<sql>
			CREATE TABLE CHELTUIELI_ARB (
			
				ID BIGINT NOT NULL,
				DEPLASARE_DECONT_ID BIGINT,
				VALUTA TEXT,
				CURS_VALUTAR NUMERIC(8,4),
				NUMAR_DOCUMENT_JUSTIFICATIV TEXT,
				DATA_DOCUMENT_JUSTIFICATIV TIMESTAMP,
				TIP_DOCUMENT_JUSTIFICATIV TEXT,
				VALOARE_CHELTUIALA NUMERIC(8,4),
				EXPLICATIE TEXT,
				
				CONSTRAINT pk_cheltuieli_arb PRIMARY KEY (ID),
				CONSTRAINT fk_depl_decont_chelt_arb FOREIGN KEY (DEPLASARE_DECONT_ID) REFERENCES DEPLASARI_DECONTURI (ID)
			);
		</sql>
	</changeSet>
		
	<changeSet id="0013-adaugare-tabel-cheltuieli-reprezentant-arb" author="CloudSoft.User2">
		<sql>
			CREATE TABLE CHELTUIELI_REPREZENTANT_ARB (
			
				ID BIGINT NOT NULL,
				DEPLASARE_DECONT_ID BIGINT,
				VALUTA TEXT,
				CURS_VALUTAR NUMERIC(8,4),
				NUMAR_DOCUMENT_JUSTIFICATIV TEXT,
				DATA_DOCUMENT_JUSTIFICATIV TIMESTAMP,
				TIP_DOCUMENT_JUSTIFICATIV TEXT,
				VALOARE_CHELTUIALA NUMERIC(8,4),
				EXPLICATIE TEXT,
				
				CONSTRAINT pk_cheltuieli_reprezentant_arb PRIMARY KEY (ID),
				CONSTRAINT fk_depl_decont_chelt_rep_arb FOREIGN KEY (DEPLASARE_DECONT_ID) REFERENCES DEPLASARI_DECONTURI (ID)
			);
		</sql>
	</changeSet>
	
	<changeSet id="0013-adaugare-tabel-curs-valutar" author="CloudSoft.User2">
		<sql>
			CREATE TABLE CURS_VALUTAR (
			
				ID BIGINT NOT NULL,
				EUR NUMERIC(8,4) NOT NULL,
				USD NUMERIC(8,4) NOT NULL,
				DATA DATE NOT NULL,
				
				CONSTRAINT pk_curs_valutar PRIMARY KEY (ID)
			);
		</sql>
	</changeSet>
	
	<changeSet id="0013-drop-not-null-constraint-de-pe-coloana-denumire-comitet-din-tabelul-deplasari-deconturi" author="CloudSoft.User2">
		<sql>
			ALTER TABLE DEPLASARI_DECONTURI ALTER COLUMN DENUMIRE_COMITET DROP NOT NULL;
		</sql>
	</changeSet>
	
	
</databaseChangeLog>