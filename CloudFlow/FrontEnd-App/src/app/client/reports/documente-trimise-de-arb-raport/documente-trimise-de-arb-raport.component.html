<app-loading *ngIf="loading"></app-loading>
<p-panel [toggleable]="true">
    <p-header>
         {{'LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB' | translate}}
    </p-header>
    <form [formGroup]="formGroup">		
		<div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
			<div class="ui-grid-row">
				<div class="ui-grid-col-3">
					{{'LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_FILTER_DATA_INCEPUT' | translate}}:
				</div>
				<div class="ui-grid-col-9">
					<p-calendar formControlName="dataInceput"
							showIcon="true" 
							[dateFormat]="dateFormat"
							monthNavigator="true" 
							yearNavigator="true"
							[yearRange]="yearRange"
							showButtonBar="true"
							appendTo="body" 
							[dataType]="'date'">
					</p-calendar>
				</div>
			</div>
			<div class="ui-grid-row">
				<div class="ui-grid-col-3">
					{{'LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_FILTER_PANA_DATA_SFARSIT' | translate}}:
				</div>
				<div class="ui-grid-col-9">
					<p-calendar formControlName="dataSfarsit"
							showIcon="true" 
							[dateFormat]="dateFormat"
							monthNavigator="true" 
							yearNavigator="true"
							[yearRange]="yearRange"
							showButtonBar="true"
							appendTo="body" 
							[dataType]="'date'">
					</p-calendar>
				</div>
			</div>
		</div>
	</form>
	<p-footer>
		<p-button [label]="'LABELS.REPORT_VIEW' | translate" (onClick)="onView()"></p-button>
		<p-button [label]="'LABELS.EXPORT_CSV' | translate" (onClick)="exportCSV()"></p-button>
	</p-footer>
</p-panel>

<p-table *ngIf="reportVisible"
		[value]="report"  
		[columns]="columns"
		[responsive]="true"
		[resizableColumns]="true"
		[loading]="loading"
		selectionMode="single"  
		(onRowSelect)="onRowSelect($event)"
		(onRowUnselect)="onRowUnselect($event)"
		[style]="{'margin-top':'5px'}"
		[scrollable]="true" 
		[scrollHeight]="scrollHeight">

	<ng-template pTemplate="colgroup">
		<colgroup>
			<col style="width: 50px">
			<col style="width: 10%">
			<col style="width: 15%">
			<col style="width: 60%">
			<col style="width: 15%">
		</colgroup>
	</ng-template>

	<ng-template pTemplate="header">
			<tr>
				<th>{{"LABELS.NO_CRT" | translate}}</th>
				<th pResizableColumn>{{"LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_DATA_INREGISTRARE" | translate}}</th>
				<th pResizableColumn>{{"LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_INSTITUTIE" | translate}}</th>
				<th pResizableColumn>{{"LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_DOCUMENT" | translate}}</th>
				<th pResizableColumn>{{"LABELS.REPORT_DOCUMENTE_TRIMISE_DE_ARB_NUMAR_INREGISTRARE_IESIRE" | translate}}</th>
			</tr>
	</ng-template>
	<ng-template pTemplate="body" let-row let-index="rowIndex">
			<tr [pSelectableRow]="row">	
				<td [ngStyle]="row.style">{{index + 1}}</td>					
				<td [ngStyle]="row.style">{{row.dataInregistrare | appDateFormater}}</td>				
				<td [ngStyle]="row.style">{{row.institutie}}</td>				
				<td [ngStyle]="row.style">{{row.document}}</td>				
				<td [ngStyle]="row.style">{{row.numarInregistrareIesireForDisplay}}</td>	
			</tr>
	</ng-template>
	<ng-template pTemplate="emptymessage" let-columns>
        <tr>
            <td [attr.colspan]="5">
                {{"LABELS.NO_RECORDS_FOUND" | translate}}
            </td>
        </tr>
    </ng-template>
</p-table>
